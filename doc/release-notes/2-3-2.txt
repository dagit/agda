------------------------------------------------------------------------
-- Release notes for Agda 2 version 2.3.2
------------------------------------------------------------------------

Important changes since 2.3.0:

Language
========

* Instance arguments resolution will now consider candidates which
  still need expect arguments. For example:

    record Eq (A : Set) : Set where
      field eq : A → A → Bool

    open Eq {{...}}

    eqFin : {n : ℕ} → Eq (Fin n)
    eqFin = record { eq = primEqFin }

    testFin : Bool
    testFin = eq fin1 fin2

  The type-checker will now resolve the instance argument of the eq
  function to eqFin {_}. This is only done for implicit arguments, not
  instance arguments, so that the instance search stays non-recursive.

* New: Built-in irrelevance axiom.

    import Level

    postulate
      .irrAxiom : ∀ {a}{A : Set a} → .A → A
    {-# BUILTIN IRRAXIOM irrAxiom #-}

* Irrelevant projections require irrelevance axiom.

  Record with irrelevant fields now require the built-in IRRAXIOM
  (unless --no-irrelevant-projections).

    record Squash {a}(A : Set a) : Set a where
      constructor squash
      field
        .unsquash : A

  This will produce an irrelevant projection

    .unsquash : ∀ {a}{A : Set a} → Squash A → A
    unsquash (squash x) = irrAxiom x

  Thus, Agda will check for the built-in irrAxiom to be defined.

Compiler backends
=================

Tools
=====

Emacs mode
----------

* Asynchronous Emacs mode.

  One can now use Emacs while a buffer is type-checked. If the buffer
  is edited while the type-checker runs, then syntax highlighting will
  not be updated when type-checking is complete.

* Interactive syntax highlighting.

  The syntax highlighting is updated while a buffer is type-checked.
  This interactive highlighting is currently rather crude, it just
  marks that a piece of code is being type-checked, or has been
  type-checked.

* The Emacs mode now presents information about which module is
  currently being type-checked.

* New global menu entry: Information about the character at point.

  If this entry is selected, then information about the character at
  point is displayed, including (in many cases) information about how
  to type the character.

* New semantics of and default value for agda2-ghci-options.

  This change should affect very few users.

  Previously the options in agda2-ghci-options were activated using
  GHCi's :set command, now they are instead used as command-line
  arguments (prepended to haskell-ghci-program-args).

  The default value of this option has also changed: the
  -ignore-dot-ghci flag has been added.
